---
import '@fontsource-variable/dm-sans';
import '@fontsource-variable/roboto-slab';
import '../styles/globals.css';

interface Props {
  title: string;
  description: string;
  image?: string;
  type?: string;
  keywords?: string;
}

const { title, description, image, type = 'website', keywords } = Astro.props;

const siteName = 'Corey Hendrickson Productions';
const siteUrl = 'https://coreyhendrickson.com';
const canonicalUrl = new URL(Astro.url.pathname, siteUrl).href;
const siteKeywords = "Vermont Video Production, Vermont Film Crew, Vermont Filmmaker, Vermont DP, documentary film production, documentary, interview, new england film production, new england film director, non-fiction cinematographer, cinematographer, vermont storytelling, vermont brand films, new england, vermont, middlebury, corey hendrickson, doc film, film director, commercial video production, brand films, corporate video, nonprofit video production, television production, PBS, NBC, educational video, hospitality video, travel video, Vermont cinematographer, New England cinematographer, vermont non-fiction cinematographer, vermont director";
const metaKeywords = keywords ? `${keywords}, ${siteKeywords}` : siteKeywords;

const ogImage = image
  ? new URL(image, siteUrl).href
  : `${siteUrl}/images/middlebury/Middlebury-College-Vermont0001.jpg`;

const jsonLd = {
  '@context': 'https://schema.org',
  '@type': 'Organization',
  name: siteName,
  url: siteUrl,
  description: 'Vermont-based film and video production company specializing in documentary, brand films, television, and commercial video. Serving New England and beyond.',
  logo: `${siteUrl}/favicon.svg`,
};
---
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#f5f0eb" />
    <meta name="description" content={description} />
    <meta name="keywords" content={metaKeywords} />
    <title>{title}</title>

    <!-- Canonical -->
    <link rel="canonical" href={canonicalUrl} />

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />

    <!-- Open Graph -->
    <meta property="og:type" content={type} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:url" content={canonicalUrl} />
    <meta property="og:site_name" content={siteName} />
    <meta property="og:image" content={ogImage} />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={ogImage} />

    <!-- Structured Data -->
    <script type="application/ld+json" set:html={JSON.stringify(jsonLd)} />

    <!-- Google Analytics -->
    <script is:inline async src="https://www.googletagmanager.com/gtag/js?id=G-4LPRX8NML3"></script>
    <script is:inline>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-4LPRX8NML3');
    </script>
  </head>
  <body class="font-sans antialiased">
    <slot />
  </body>
</html>
